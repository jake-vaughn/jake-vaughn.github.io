<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="layout-lang" content="en"><meta name="day-prompt" content="d ago"><meta name="hour-prompt" content="hr ago"><meta name="minute-prompt" content="min ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="2023 Moonbeam Node Server Setup Guide" /><meta name="author" content="Jake Vaughn" /><meta property="og:locale" content="en" /><meta name="description" content="Overview: Creating a Hetzner Server Downloading Snapshot (optional) Moonbeam Relay Chain Backup Moonbeam Parachain RocksDB Backup Service and Binary Setup Configuration File Running the Service Telemetry" /><meta property="og:description" content="Overview: Creating a Hetzner Server Downloading Snapshot (optional) Moonbeam Relay Chain Backup Moonbeam Parachain RocksDB Backup Service and Binary Setup Configuration File Running the Service Telemetry" /><link rel="canonical" href="https://jake-vaughn.com/posts/2023_Moonbeam_Node_Server_Setup_Guide/" /><meta property="og:url" content="https://jake-vaughn.com/posts/2023_Moonbeam_Node_Server_Setup_Guide/" /><meta property="og:site_name" content="Jake Vaughn" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-03-29T08:00:00-05:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="2023 Moonbeam Node Server Setup Guide" /><meta name="twitter:site" content="@NA" /><meta name="twitter:creator" content="@Jake Vaughn" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Jake Vaughn"},"dateModified":"2023-04-07T13:18:54-05:00","datePublished":"2023-03-29T08:00:00-05:00","description":"Overview: Creating a Hetzner Server Downloading Snapshot (optional) Moonbeam Relay Chain Backup Moonbeam Parachain RocksDB Backup Service and Binary Setup Configuration File Running the Service Telemetry","headline":"2023 Moonbeam Node Server Setup Guide","mainEntityOfPage":{"@type":"WebPage","@id":"https://jake-vaughn.com/posts/2023_Moonbeam_Node_Server_Setup_Guide/"},"url":"https://jake-vaughn.com/posts/2023_Moonbeam_Node_Server_Setup_Guide/"}</script><title>2023 Moonbeam Node Server Setup Guide | Jake Vaughn</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Jake Vaughn"><meta name="application-name" content="Jake Vaughn"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang=""><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/profilepic.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Jake Vaughn</a></div><div class="site-subtitle font-italic">Welcome to my page!</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/guides/" class="nav-link"> <i class="fa-fw fas fa-book ml-xl-3 mr-xl-3 unloaded"></i> <span>GUIDES</span> </a><li class="nav-item"> <a href="/projects/" class="nav-link"> <i class="fa-fw fas fa-wave-square ml-xl-3 mr-xl-3 unloaded"></i> <span>PROJECTS</span> </a><li class="nav-item"> <a href="/reflections/" class="nav-link"> <i class="fa-fw fas fa-briefcase ml-xl-3 mr-xl-3 unloaded"></i> <span>REFLECTIONS</span> </a><li class="nav-item"> <a href="/resume/" class="nav-link"> <i class="fa-fw fas fa-file ml-xl-3 mr-xl-3 unloaded"></i> <span>RESUME</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/jake-vaughn" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['jakevon358','gmail.com'].join('@')" aria-label="email" class="order-4" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-5" > <i class="fas fa-rss"></i> </a> <a href="https://www.linkedin.com/in/jakevaughn/" aria-label="linkedin" class="order-6" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>2023 Moonbeam Node Server Setup Guide</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>2023 Moonbeam Node Server Setup Guide</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Jake Vaughn </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Wed, Mar 29, 2023, 8:00 AM -0500" >Mar 29<i class="unloaded">2023-03-29T08:00:00-05:00</i> </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Fri, Apr 7, 2023, 1:18 PM -0500" >Apr 7<i class="unloaded">2023-04-07T13:18:54-05:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1256 words">6 min read</span></div></div><div class="post-content"><h1 id="overview">Overview:</h1><ul><li><a href="#creating-a-hetzner-server">Creating a Hetzner Server</a><li><a href="#downloading-snapshot-optional">Downloading Snapshot (optional)</a><ul><li><a href="#moonbeam-relay-chain-backup">Moonbeam Relay Chain Backup</a><li><a href="#moonbeam-parachain-rocksdb-backup">Moonbeam Parachain RocksDB Backup</a></ul><li><a href="#service-and-binary-setup">Service and Binary Setup</a><li><a href="#configuration-file">Configuration File</a><li><a href="#running-the-service">Running the Service</a><li><a href="#telemetry">Telemetry</a></ul><h1 id="creating-a-hetzner-server">Creating a Hetzner Server</h1><p>If you want to run your node on a server then Hetzner is your best bet. There are other options out there like Digital Ocean and Vultr, but neither of them gets to the price point that Hetzner provides.</p><p>First Create an account at <a href="https://accounts.hetzner.com/signUp">Hetzner</a>. Then login at <a href="https://console.hetzner.cloud/projects">hetzner.cloud</a> and bookmark this page. Go ahead and create a new project naming it whatever you like. Once it is created click on it and then click on ADD SERVER. In the options pick any location you want and Ubuntu for the Image.</p><p><img data-proofer-ignore data-src="/images/MoonbeamNode/createServer1.png" alt="Server Creation 1" /> Next pick the type standard and the option CPX41 which has 240 GB of storage.</p><p><img data-proofer-ignore data-src="/images/MoonbeamNode/createServer2.png" alt="Server Creation 2" /></p><p>Current requirements for a node based on the <a href="https://docs.moonbeam.network/node-operators/networks/run-a-node/overview/#requirements">moonbeam docs</a> say that we need an 8 Core CPU, 16 GB Ram, and a 1 TB SSD. These requirements are a bit over the top as they are intended for Validators/Collators and are future-proof. The main minimum specs we need to worry about is storage. As of writing this post a Full node on moonbeam currently needs roughly 400 GB of storage. This storage requirement will grow with time so keep that in mind. For now, we can use the CPX41 option as it meets the requirements, but most importantly the storage.</p><blockquote><p>Node: Going under the 8 Core and 16 GB Ram requirements will work fine for a noncritical node and will only result in slower sync time. However, it is not recommended for Validators/Collators.</p></blockquote><p>Next, create and add your SSH key. If you do not know how I suggest using ssh-keygen. An article explaining <a href="https://www.ssh.com/academy/ssh/keygen">“How to Use ssh-keygen to Generate a New SSH Key?”</a>.</p><p><img data-proofer-ignore data-src="/images/MoonbeamNode/addSSH.png" alt="Add SSH" /></p><p>Once the SSH key is added leave everything else default and click CREATE &amp; BUY NOW</p><p><img data-proofer-ignore data-src="/images/MoonbeamNode/createServer3.png" alt="Server Creation 3" /></p><p>With the server created we can now login using ssh.</p><div lang="bash" class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>ssh root@&lt;SERVER_IP&gt;
</pre></table></code></div></div><p>You should then get a response as such.</p><p><img data-proofer-ignore data-src="/images/MoonbeamNode/sshLogin.png" alt="SSH Login" /></p><p>Once logged in I recommend updating the server using </p><div lang="bash" class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>apt update <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>apt upgrade
</pre></table></code></div></div><p>and rebooting.</p><h1 id="creating-a-volume">Creating a Volume</h1><p>In Hetzner click on the server, you created and go to the VOLUMES tab on the left. Then click Create Volume and set the storage to 524 GB and name it volume1. Now click CREATE &amp; BUY NOW.</p><p><img data-proofer-ignore data-src="/images/MoonbeamNode/createVolume.png" alt="Create Volume" /></p><p>After the volume is created go back to where you logged into the server and configure the volume by following the commands given in the settings of the volume on Hetzner.</p><p><img data-proofer-ignore data-src="/images/MoonbeamNode/configVolume.png" alt="Volume Config" /></p><p>This mounts the volume at <code class="language-plaintext highlighter-rouge">/mnt/volume1</code> where we will download the chain data.</p><h1 id="enabling-swapfile">Enabling SwapFile</h1><p>Creating a Linux SwapFile is not necessary but is nice to have if you are running other memory-intensive programs on your server. Using a swap is a very useful way to extend the RAM because it provides the necessary additional memory when the RAM space has been exhausted and a process has to be continued. If you want to create a swap file run the following commands.</p><div lang="bash" class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>fallocate <span class="nt">-l</span> 16G /swapfile
</pre></table></code></div></div><div lang="bash" class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo chmod </span>600 /swapfile
</pre></table></code></div></div><div lang="bash" class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>mkswap /swapfile
</pre></table></code></div></div><div lang="bash" class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>swapon /swapfile
</pre></table></code></div></div><p>Open the /etc/fstab file</p><div lang="bash" class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>nano /etc/fstab
</pre></table></code></div></div><p>add the following to the end of the file</p><div lang="s" class="language-s highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="o">/</span><span class="n">swapfile</span><span class="w"> </span><span class="n">swap</span><span class="w"> </span><span class="n">swap</span><span class="w"> </span><span class="n">defaults</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w">
</span></pre></table></code></div></div><p>Save the file with <code class="language-plaintext highlighter-rouge">Ctrl+s</code> and close it with <code class="language-plaintext highlighter-rouge">Ctrl+x</code></p><p>To verify that the swap file is active use</p><div lang="bash" class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>swapon - show
</pre></table></code></div></div><p>It should result in something like the following.</p><div lang="console" class="language-console highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="go">NAME TYPE SIZE USED PRIO
/swapfile file 1024M 507.4M -1
</span></pre></table></code></div></div><h1 id="downloading-snapshot-optional">Downloading Snapshot (optional)</h1><p>Something that can GREATLY increase sync time is downloading an already synced snapshot of either the moonbeam para-chain, the relay chain, or both. If you need your node up quickly or don’t want to bother waiting this is your best option. My current recommendation is to use <a href="https://www.certhum.com/moonbeam-databases">Certhum’s backups</a> as they are updated regularly. If you want to sync the node from scratch skip down to the section <a href="#service-and-binary-setup">Service and Binary Setup</a>.</p><h2 id="moonbeam-relay-chain-backup">Moonbeam Relay Chain Backup</h2><p>Download the backup to volume1. This will take time depending on your network speed.</p><div lang="bash" class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>wget <span class="nt">-O</span> /mnt/volume1/moonbeam-polkadot-backup.tar.zst https://db.certhum.com/moonbeam-polkadot-backup.tar.zst
</pre></table></code></div></div><blockquote><p>Note: If the download fails or gets canceled reenter the command with the -c flag to continue the download from where it left off.</p></blockquote><p><img data-proofer-ignore data-src="/images/MoonbeamNode/wgetBackup.png" alt="wgetBackup" /></p><p>next download the sst</p><div lang="bash" class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>wget <span class="nt">-O</span> /mnt/volume1/moonbeam-polkadot-sst.dict https://db.certhum.com/moonbeam-polkadot-sst.dict
</pre></table></code></div></div><p>install zstd (ZSTD speeds up the unzipping process)</p><div lang="bash" class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>apt <span class="nb">install </span>zstd
</pre></table></code></div></div><p>Create the directory for the database in mnt/volume1</p><div lang="bash" class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo mkdir</span> <span class="nt">-p</span> /mnt/volume1/moonbeam-data/polkadot/chains/polkadot/db
</pre></table></code></div></div><p>and finally unzip the backup to the database using</p><div lang="bash" class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo tar</span> <span class="nt">-I</span> <span class="s1">'zstd -vd -T0 -D /mnt/volume1/moonbeam-polkadot-sst.dict'</span> <span class="nt">-xvf</span> moonbeam-polkadot-backup.tar.zst <span class="nt">-C</span> /mnt/volume1/moonbeam-data/polkadot/chains/polkadot/db <span class="nt">--strip-components</span><span class="o">=</span>7
</pre></table></code></div></div><blockquote><p>Note: Do not disconect from the server while unziping the backup or it will stop.</p></blockquote><p>This should take some time so wait until it is finished.</p><h2 id="moonbeam-parachain-rocksdb-backup">Moonbeam Parachain RocksDB Backup</h2><p>The process for downloading the Moonbeam Parachain is almost the same as the Relay Chain so I won’t go into as much detail.</p><div lang="bash" class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>wget <span class="nt">-O</span> /mnt/volume1/moonbeam-backup-archive.tar.zst https://db.certhum.com/moonbeam-backup.tar.zst
</pre></table></code></div></div><div lang="bash" class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>wget <span class="nt">-O</span> /mnt/volume1/moonbeam-sst.dict https://db.certhum.com/moonbeam-sst.dict
</pre></table></code></div></div><div lang="bash" class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo mkdir</span> <span class="nt">-p</span> /mnt/volume1/moonbeam-data/chains/moonbeam/db
</pre></table></code></div></div><div lang="bash" class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo tar</span> <span class="nt">-I</span> <span class="s1">'zstd -vd -T0 -D /mnt/volume1/moonbeam-sst.dict'</span> <span class="nt">-xvf</span> /mnt/volume1/moonbeam-backup-archive.tar.zst <span class="nt">-C</span> /mnt/volume1/moonbeam-data/chains/moonbeam/db <span class="nt">--strip-components</span><span class="o">=</span>6
</pre></table></code></div></div><h1 id="service-and-binary-setup">Service and Binary Setup</h1><p>The following commands will set up everything regarding running the service.</p><ol><li>Creates a service account to run the service:</ol><div lang="bash" class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>adduser moonbeam_service <span class="nt">--system</span> <span class="nt">--no-create-home</span>
</pre></table></code></div></div><ol><li>Creates a directory to store the binary and data:</ol><div lang="bash" class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo mkdir</span> /mnt/volume1/moonbeam-data
</pre></table></code></div></div><ol><li>Downloads the Latest <a href="https://github.com/PureStake/moonbeam/releases">Moonbeam Binary</a>:</ol><div lang="bash" class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>wget <span class="nt">-O</span> /mnt/volume1/moonbeam-data/moonbeam https://github.com/PureStake/moonbeam/releases/download/v0.30.3/moonbeam
</pre></table></code></div></div><ol><li>Sets the ownership and permissions for the local directory that stores the chain data:</ol><div lang="bash" class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo chmod</span> +x /mnt/volume1/moonbeam-data/moonbeam
</pre></table></code></div></div><div lang="bash" class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo chown</span> <span class="nt">-R</span> moonbeam_service /mnt/volume1/moonbeam-data
</pre></table></code></div></div><h1 id="configuration-file">Configuration File</h1><p>The next step is to create the systemd configuration file. Depending on your needs there are a few different options between creating a full node or a pruning node. If you used the backups above you will need to have state-pruning set to archive. If you want a pruned node you can remove <code class="language-plaintext highlighter-rouge"> - state-pruning=archive</code> from the config file and the node will default to pruning the state to the last 256 blocks. More info about flags can be found <a href="https://docs.moonbeam.network/node-operators/networks/run-a-node/flags/">here</a>.</p><blockquote><p>Note: Full nodes a.k.a “archive” nodes keep the full history of the chain.</p></blockquote><p>Create the config file at /etc/systemd/system/moonbeam.service</p><div lang="bash" class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>nano /etc/systemd/system/moonbeam.service
</pre></table></code></div></div><p>Add the following to the file changing YOUR-NODE-NAME to a name you want.</p><div lang="conf" class="language-conf highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre><td class="rouge-code"><pre>[<span class="n">Unit</span>]
<span class="n">Description</span>=<span class="s2">"Moonbeam systemd service"</span>
<span class="n">After</span>=<span class="n">network</span>.<span class="n">target</span>
<span class="n">StartLimitIntervalSec</span>=<span class="m">0</span>

[<span class="n">Service</span>]
<span class="n">Type</span>=<span class="n">simple</span>
<span class="n">Restart</span>=<span class="n">on</span>-<span class="n">failure</span>
<span class="n">RestartSec</span>=<span class="m">10</span>
<span class="n">User</span>=<span class="n">moonbeam_service</span>
<span class="n">SyslogIdentifier</span>=<span class="n">moonbeam</span>
<span class="n">SyslogFacility</span>=<span class="n">local7</span>
<span class="n">KillSignal</span>=<span class="n">SIGHUP</span>
<span class="n">ExecStart</span>=/<span class="n">mnt</span>/<span class="n">volume1</span>/<span class="n">moonbeam</span>-<span class="n">data</span>/<span class="n">moonbeam</span> \
     --<span class="n">execution</span> <span class="n">wasm</span> \
     --<span class="n">wasm</span>-<span class="n">execution</span> <span class="n">compiled</span> \
     --<span class="n">state</span>-<span class="n">pruning</span>=<span class="n">archive</span> \
     --<span class="n">trie</span>-<span class="n">cache</span>-<span class="n">size</span> <span class="m">0</span> \
     --<span class="n">base</span>-<span class="n">path</span> /<span class="n">mnt</span>/<span class="n">volume1</span>/<span class="n">moonbeam</span>-<span class="n">data</span> \
     --<span class="n">chain</span> <span class="n">moonbeam</span> \
     --<span class="n">name</span> <span class="s2">"YOUR-NODE-NAME"</span> \
     -- \
     --<span class="n">execution</span> <span class="n">wasm</span> \
     --<span class="n">state</span>-<span class="n">pruning</span> <span class="m">1000</span> \
     --<span class="n">name</span>=<span class="s2">"YOUR-NODE-NAME (Embedded Relay)"</span>

[<span class="n">Install</span>]
<span class="n">WantedBy</span>=<span class="n">multi</span>-<span class="n">user</span>.<span class="n">target</span>
</pre></table></code></div></div><p>Save the file with <code class="language-plaintext highlighter-rouge">Ctrl+s</code> and close it with <code class="language-plaintext highlighter-rouge">Ctrl+x</code></p><h1 id="running-the-service">Running the Service</h1><p>The last thing to do is enable and run the service.</p><div lang="bash" class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>systemctl <span class="nb">enable </span>moonbeam.service
</pre></table></code></div></div><div lang="bash" class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>systemctl start moonbeam.service
</pre></table></code></div></div><p>Check the output logs from the node with</p><div lang="bash" class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>journalctl <span class="nt">-f</span> <span class="nt">-u</span> moonbeam.service
</pre></table></code></div></div><p>Your node should now be running and should start back up if you ever reboot the system. Depending on if you downloaded the optional backups complete syncing of the node should take around 2-3 days.</p><p>If you ever need to stop the service do it with</p><div lang="bash" class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>systemctl stop moonbeam.service
</pre></table></code></div></div><p>and if you want to disable the service from starting on reboot</p><div lang="bash" class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>systemctl disable moonbeam.service
</pre></table></code></div></div><h1 id="telemetry">Telemetry</h1><p>View your nodes telemetry by searching the name of your node at <a href="https://telemetry.polkadot.io/#list/0xfe58ea77779b7abda7da4ec526d14db9b1e9cd40a217c34892af80a9b332b76d">Polkadot’s Telemetry dashboard</a>.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/guides/'>Guides</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/moonbeam/" class="post-tag no-text-decoration" >moonbeam</a> <a href="/tags/node/" class="post-tag no-text-decoration" >node</a> <a href="/tags/para-chain/" class="post-tag no-text-decoration" >para-chain</a> <a href="/tags/server/" class="post-tag no-text-decoration" >server</a> <a href="/tags/guide/" class="post-tag no-text-decoration" >guide</a> <a href="/tags/setup/" class="post-tag no-text-decoration" >setup</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=2023 Moonbeam Node Server Setup Guide - Jake Vaughn&url=https://jake-vaughn.com/posts/2023_Moonbeam_Node_Server_Setup_Guide/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=2023 Moonbeam Node Server Setup Guide - Jake Vaughn&u=https://jake-vaughn.com/posts/2023_Moonbeam_Node_Server_Setup_Guide/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=2023 Moonbeam Node Server Setup Guide - Jake Vaughn&url=https://jake-vaughn.com/posts/2023_Moonbeam_Node_Server_Setup_Guide/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink('', 'Link copied successfully!')" data-toggle="tooltip" data-placement="top" title="Copy link"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/2023_Moonbeam_Node_Server_Setup_Guide/">2023 Moonbeam Node Server Setup Guide</a><li><a href="/posts/CprE308_Shell/">CprE 308 Shell Design</a><li><a href="/posts/Modifying_EVM_Bytecode_Function_Selectors/">Modifying EVM Bytecode Function Selectors</a><li><a href="/posts/Polkadot_Network_Visualization/">Polkadot Network Visualization</a><li><a href="/posts/Cumulative_Reflection/">Cumulative Reflection</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/portfolio/">portfolio</a> <a class="post-tag" href="/tags/isu/">ISU</a> <a class="post-tag" href="/tags/project/">project</a> <a class="post-tag" href="/tags/guide/">guide</a> <a class="post-tag" href="/tags/bytecode/">bytecode</a> <a class="post-tag" href="/tags/moonbeam/">moonbeam</a> <a class="post-tag" href="/tags/node/">node</a> <a class="post-tag" href="/tags/para-chain/">para-chain</a> <a class="post-tag" href="/tags/reflection/">reflection</a> <a class="post-tag" href="/tags/server/">server</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/2022_Moonbeam_Node_Setup_Guide/"><div class="card-body"> <span class="timeago small" >Nov 8, 2022<i class="unloaded">2022-11-08T08:00:00-06:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>2022 Moonbeam Node Setup Guide</h3><div class="text-muted small"><p> Overview: This is a guide on how to quickly setup and sync a Moonbeam node on a hosted server. Running a node on a Moonbeam-based network allows you to connect to the network, sync with a bootnode,...</p></div></div></a></div><div class="card"> <a href="/posts/Modifying_EVM_Bytecode_Function_Selectors/"><div class="card-body"> <span class="timeago small" >Oct 24, 2022<i class="unloaded">2022-10-24T08:00:00-05:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Modifying EVM Bytecode Function Selectors</h3><div class="text-muted small"><p> Overview: Function selectors are a way of identifying functions in EVM (Ethereum Virtual Machine) smart contracts. These function signatures are hashed using the keccak256 algorithm, and the first ...</p></div></div></a></div><div class="card"> <a href="/posts/ZkSync_Bytecode_From_Contract_Creation_Transaction/"><div class="card-body"> <span class="timeago small" >Nov 30, 2022<i class="unloaded">2022-11-30T08:00:00-06:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>ZkSync Bytecode From Contract Creation Transaction</h3><div class="text-muted small"><p> Overview: This will be a short post on how to obtain a ZkSync 2.0 smart contract’s bytecode from the contract creation transaction. This post will also detail some of the differences between deploy...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/ZkSync_Bytecode_From_Contract_Creation_Transaction/" class="btn btn-outline-primary" prompt="Older"><p>ZkSync Bytecode From Contract Creation Transaction</p></a> <span class="btn btn-outline-primary disabled" prompt="Newer"><p>-</p></span></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://twitter.com/">Jake Vaughn</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/portfolio/">portfolio</a> <a class="post-tag" href="/tags/isu/">ISU</a> <a class="post-tag" href="/tags/project/">project</a> <a class="post-tag" href="/tags/guide/">guide</a> <a class="post-tag" href="/tags/bytecode/">bytecode</a> <a class="post-tag" href="/tags/moonbeam/">moonbeam</a> <a class="post-tag" href="/tags/node/">node</a> <a class="post-tag" href="/tags/para-chain/">para chain</a> <a class="post-tag" href="/tags/reflection/">reflection</a> <a class="post-tag" href="/tags/server/">server</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://jake-vaughn.com{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
